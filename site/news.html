<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oortcloud NewsBoard</title>
    
    <!--CSS FILES-->
    <link rel="stylesheet" type="text/css" href="css/news.css" />
    <link rel="stylesheet" type="text/css" href="css/fonts.css" />

    <!--JS FILES-->
    <script src="js/api.js"></script>
    
    <!-- <script src="js/header.js"></script> -->

    <!--ICONS-->
    <script src="https://kit.fontawesome.com/0719efe947.js" crossorigin="anonymous"></script>
    <link href='https://unpkg.com/css.gg@2.0.0/icons/css/menu.css' rel='stylesheet'>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <!--EXTERNAL-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css">
</head>
<body>
    <div class="page-content">
        <header>
            <div class="header-content">
                <div class="header-name">
                    <p class="name-title-small">Oortcloud <span class="colour-text">NewsBoard</span></p>
                </div>
                <div class="active-date">
                    <p class="date-label">Today's date is</p>
                    <p id="currentDate"></p>
                </div>
            </div>
        </header>
        <main>
            <div class="main-content">
                <div class="intro">
                    <p class="intro-text"><span class="colour-text">NewsBoard</span> is the hub for all news related to <span class="orange-highlight">space</span>, <span class="blue-highlight">the Earth</span> and <span class="purple-highlight">astronomy</span>.</p>
                </div>
                <div class="articles-title">
                    <p class="articles-title-text">Articles</p>
                    <button class="added-info-btn">
                        <i class='bx bx-info-circle'></i>
                    </button>
                </div>
                <section class="featured-section">
                    <article class="main-article">
                        <img class="article-img" src="" frameborder="0">
                    </article>
                </section>
            </div>
        </main>
        <footer>
            <div class="footer-content">
                <div class="site-info">
                    <p class="si-text">INFO VIA <a href="https://api.nasa.gov" target="_blank" style="text-decoration: underline;">API.NASA.GOV</a></p>
                    <p class="si-text">JAYDEN PRIESTLEY 2024</p>
                </div>
            </div>
        </footer>
    </div>
    <div class="added-info-popup" id="popupMenu" aria-hidden="true">
        <div class="aip-content">
            <p class="articles-description">Articles fetched via APIs, you can choose to open them internally on our site, or on the page of the author site.</p>
            <button class="added-info-btn">
                <i class='bx bx-x' ></i>
            </button>
        </div>
    </div>
    <script>
        function updateDate() {
          const currentDate = new Date();
          const formattedDate = currentDate.toLocaleDateString(undefined, {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
          });
          document.getElementById('currentDate').textContent = formattedDate;
        }
    
        // Update the date initially
        updateDate();
    
        // Update the date every second
        setInterval(updateDate, 1000);
    </script>
    <script>
        const popupBtn = document.querySelectorAll('.added-info-btn');
        const popupMenu = document.getElementById('popupMenu');

        popupBtn.forEach(button => {
            button.addEventListener('click', function() {
            const isHidden = popupMenu.getAttribute('aria-hidden') === 'true';
            popupMenu.setAttribute('aria-hidden', !isHidden);
        });
        });
    </script>
    <script> 
        fetch('https://newsapi.org/v2/everything?q=astronomy&apiKey=be9c70b2dc23414fb0ac471ca18ecb20')
        .then(response => {
            console.log('JSON response:', response);
            return response.json();
        })
        .then(data => {
            // Check if the 'articles' property exists in the response
            if (data.articles && data.articles.length > 0) {
                // Assuming the first article contains the image URL
                const imageUrl = data.articles[0].urlToImage;
                // Set the image URL as the src attribute of the img tag
                document.querySelector('.article-img').src = imageUrl;
            } else {
                console.error('No articles found in the response.');
            }
        })
    </script>
</body>
</html>