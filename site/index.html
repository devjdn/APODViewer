<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oortcloud</title>
    
    <!--CSS FILES-->
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/fonts.css" />

    <!--JS FILES-->
    <script src="js/api.js"></script>

    <!--ICONS-->
    <script src="https://kit.fontawesome.com/0719efe947.js" crossorigin="anonymous"></script>
    <link href='https://unpkg.com/css.gg@2.0.0/icons/css/menu.css' rel='stylesheet'>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <!--EXTERNAL-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/themes/smoothness/jquery-ui.css">
</head>
<html>
<body class="darkmode">

    <div class="page-content">
        <header>
            <div class="header-content">
                <div class="header-name">
                    <h1>Oortcloud</h1>
                    <p class="title-description">A Space API Project</p>
                    <p class="title-description">API's provided by NASA, ESA, and Open Notify.</p>
                </div>
                <div class="page-link-container">
                    <div class="page-links">
                        <a href="#APOD"><div class="link"><p class="link-text">APOD</p></div></a>
                    </div>
                    <div class="page-links">
                        <a href="#EPIC"><div class="link"><p class="link-text">EPIC</p></div></a>
                    </div>
                    <div class="page-links">
                        <a href="#apod"><div class="link"><p class="link-text">Mars Rover Photos</p></div></a>
                    </div>
                    <div class="page-links">
                        <a href="#apod"><div class="link"><p class="link-text">Mars Weather Service</p></div></a>
                    </div>
                    <div class="page-links">
                        <a href="#apod"><div class="link"><p class="link-text">DONKI</p></div></a>
                    </div>
                </div>
                <!-- <div class="light-dark-mode-btns">
                    <button class="light light-dark" onclick="disableDarkMode()"><i class='bx bxs-sun'></i></button>
                    <button class="dark light-dark" onclick="enableDarkMode()"><i class='bx bxs-moon'></i></button>
                </div> -->
            </div>
        </header>
        <main>
            <div class="main-content">
                
                <section class="apod content-section" id="APOD">
                    <div class="intro">
                        <div class="intro-text">
                            <h2>Astronomy Picture of the Day</h2>
                            <p class="intro-description">View NASA's choice for Astronomy Picture of the Day. Alternatively, you can have us provide you with a random assortment of images with explanantions attached.</p>
                        </div>
                        <div class="fetch-container">
                            <p class="control-label">Select a date between 16 June 1995 to the present day, or click fetch straight away to view today's.</p>
                            <div class="apod-controls">
                                <input type="date" name="" value="">
                                <button class="fetch-apod fetch-data">Fetch APOD</button>
                            </div>
                        </div>
                    </div>
                    <div class="apod-content">
                        <div class="apod-img-container">
                            <div class="spinner">
                                <div class="spinner-items">
                                    <div class="spinner-animation">
                                        <div class="spinner-icon">
                                            <i class='bx bx-loader'></i>
                                        </div>
                                        <p class="spinner-text">Loading API data...</p>
                                    </div>
                                </div>
                            </div>
                            <img class="apod-img" src="" alt="">
                            <iframe src="" frameborder="0"></iframe>
                        </div>
                        <div class="apod-explan-container">
                            <!-- <p class="explanation-title">APOD Explanation</p> -->
                            <p class="apod-explanation"></p>
                        </div>
                    </div>
    
                    <script>
                        document.querySelector('.fetch-apod').addEventListener('click', getFetch);
                
                        function getFetch(){
                            const choice = document.querySelector('input').value;
                            console.log(choice);
                
                            const spinner = document.querySelector('.spinner');
                            spinner.style.display = 'block'; // Show loading spinner
                
                            const url = `https://api.nasa.gov/planetary/apod?api_key=8p7wu7IiHjpbujhNGUIRWU8QgAOORkuvVSFWxBEV&date=${choice}`;
                
                            fetch(url)
                            .then(res => res.json())
                            .then(data => {
                                console.log(data);
                                if (data.media_type === 'image') {
                                    document.querySelector('.apod-img').src = data.hdurl;
                                    document.querySelector('iframe').style.display = 'none';
                                    document.querySelector('.apod-img').style.display = 'block';
                                } else if (data.media_type === 'video') {
                                    document.querySelector('iframe').src = data.url;
                                    document.querySelector('.apod-img').style.display = 'none';
                                    document.querySelector('iframe').style.display = 'block';
                                }
                                document.querySelector('.apod-explanation').innerText = data.explanation;
                
                                // Hide loading spinner after receiving response
                                spinner.style.display = 'none';
                            })
                            .catch(err => {
                                console.log(`error ${err}`);
                                // Hide loading spinner in case of error
                                spinner.style.display = 'none';
                            });
                        }
                    </script>
                </section>
                <section class="EPIC content-section" id="EPIC">
                    <div class="intro">
                        <div class="intro-text">
                            <h2>Earth Polychromatic Imaging Camera</h2>
                            <p class="intro-description">Daily images of the Earth from the DSCOVR EPIC, positioned at the Earth-Sun Lagrange point.</p>
                        </div>
                        <div class="apod-controls">
                            <!-- <input class="data-range" type="date" name="" value=""> -->
                            <button class="fetch-epic fetch-data">Fetch EPIC image</button>
                        </div>
                    </div>
                    <div class="epic-content">
                        <div class="epic-img-container">
                            <img class="epic-img" src="" alt="">
                        </div>
                        <div class="epic-explan-container">
                            <p class="epic-explanation"></p>
                        </div>
                    </div>
                    <script>
                        document.querySelector('.fetch-epic').addEventListener('click', getFetch)
    
    function getFetch(){
        const choice = document.querySelector('input').value
        console.log(choice)

        const epicUrl = `https://api.nasa.gov/mars-photos/api/v1/rovers/curiosity/photos?sol=1000&api_key=8p7wu7IiHjpbujhNGUIRWU8QgAOORkuvVSFWxBEV`

        fetch(epicUrl)
        .then(res => res.json())
        .then(data => {
            console.log(data)
            document.querySelector('.epic-img').src = data.image_src
            document.querySelector('.epic-explanation').innerText = data.explanation
        })
        .catch(err => {
            console.log('error ${err}')
        });
    }
                    </script>
                </section>
            </div>
        </main>
        <footer>
            <div class="footer-content">
                <div class="site-info">
                    <p class="si-text">INFO VIA <a href="https://api.nasa.gov" target="_blank" style="text-decoration: underline;">API.NASA.GOV</a></p>
                    <p class="si-text">JAYDEN PRIESTLEY 2024</p>
                </div>
            </div>
        </footer>
    </div>
    <script src="js/appearance.js"></script>
<!-- <script src="js/appearance.js"></script> -->
</body>
</html>